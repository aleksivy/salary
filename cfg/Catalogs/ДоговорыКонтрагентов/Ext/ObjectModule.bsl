////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ

// Процедура вызывается перед записью элемента справочника.
//
Процедура ПередЗаписью(Отказ)

	// Проверим можно ли изменять реквизиты договора.
	// Проверка осуществляется только если записывается уже существующий договор
 	Если НЕ ОбменДанными.Загрузка И НЕ ЭтоНовый() Тогда

		Если ЭтоГруппа Тогда

			// Для группы владельца менять нельзя
			Если Владелец <> Ссылка.Владелец Тогда

				Сообщить(НСтр("ru='Нельзя изменять контрагента для группы договоров.';uk='Не можна змінювати контрагента для групи договорів.'"), СтатусСообщения.Важное);
				Отказ = Истина;

			КонецЕсли; 

		КонецЕсли;

	КонецЕсли;
	// Очистим неиспользуемые реквизиты элемента договора.
	Если Не ЭтоГруппа Тогда
 		// Проверим, заполнена ли организация.
 		Если НЕ ОбменДанными.Загрузка И НЕ ЗначениеЗаполнено(Организация) Тогда
 			Сообщить(НСтр("ru='Не указана организация, от которой заключен договор.';uk='Не вказана організація, від якої укладений договір.'"), СтатусСообщения.Важное);
 			Отказ = Истина;
 		КонецЕсли;
	КонецЕсли;

КонецПроцедуры // ПередЗаписью()
