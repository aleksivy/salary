
// Обработчик события ПередЗаписью формы.
//
Процедура ПередЗаписью(Отказ)

	#Если Клиент Тогда 
	
	Если НЕ ОбменДанными.Загрузка Тогда
		Заголовок = НСтр("ru='Запись банковского счета (';uk='Запис банківського рахунку ('") + Владелец + ") " + Наименование + НСтр("ru=', код ';uk=', код '") + Код;
		Если НЕ ЗначениеЗаполнено(ВалютаДенежныхСредств) Тогда
			РаботаСДиалогами.СообщитьПользователюНезаполненРеквизит(Ссылка, "валюта счета");
			Отказ = Истина;
		КонецЕсли;
		
		Если НЕ ЗначениеЗаполнено(Банк) Тогда
			ОбщегоНазначения.СообщитьОбОшибке(НСтр("ru='Не выбран банк';uk='Не обраний банк'"), Отказ, Заголовок);
		Иначе
			КодБанка = УправлениеДенежнымиСредствами.ПолучитьКодБанкаПоНомеруСчетаIBAN(НомерСчета);
			Если ЗначениеЗаполнено(КодБанка) И КодБанка <> СокрЛП(Банк.Код) Тогда
				ОбщегоНазначения.СообщитьОбОшибке(СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(НСтр("ru='Неверно указан банк. Должен быть банк с кодом %1.';uk='Невірно вказано банк. Має бути банк з кодом %1.'"), КодБанка), Отказ, Заголовок);
			КонецЕсли;
		КонецЕсли;	
	КонецЕсли;
	#КонецЕсли

КонецПроцедуры

